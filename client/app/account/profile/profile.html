<div class="container-fluid container-hubs">
    <div class="clearfix"></div>
    <div class="row-fluid box-header">
        <div>
            <div class="col-md-6 col-sm-7">
                <div class="hub-title-box">
                    Profile Management
                </div>
            </div>
            <div class="col-md-3 col-sm-5 pull-right">
                <div class="hub" ng-include="'components/user/user.html'"></div>
            </div>
        </div>
    </div>

    <div class="clearfix"></div>
    <div class="form-group">
        <div class="col-md-6">
            <div class="row">
                <label class="label-input">
                    Profile picture :
                </label>
                <div class="input-component">
                    <img    class="picture-circle" 
                        ng-src="{{user.ProfilePicture}}" 
                        alt="Profile Picture"/>
                    <button class="btn btn-default" ngf-select="uploadPic($file)" ng-model="file" ngf-model-invalid="errorFile"
                            type="file" accept="image/*" ngf-max-size="2MB">Upload
                    </button>
                    <div style="font:smaller">
                        <div class="report-upload">
                            {{f.name}} {{errFile.name}} {{errFile.$error}} {{errFile.$errorParam}}
                        </div>
                        <div class="progress" ng-show="f.progress >= 0">
                            <div style="width:{{f.progress}}%"  
                                 ng-bind="f.progress + '%'"></div>
                        </div>
                    </div>     
                    {{errorMsg}}
                </div>
                <div class="form-group no-margin row">
                    <div class="col-md-3 no-padding">
                        <label>
                            Password
                        </label>
                    </div>
                    <div class="col-md-4 no-padding">
                        <input value="Change Password"
                            class="first form-control" 
                            type="button" 
                            ng-hide="changePass" 
                            ng-click="changePass = true" />

                        <input ng-show="changePass" ng-model="user.oldPassword" class="form-control" type="password" placeholder="Old Password" />
                        <div ng-show="changePass && submitted && !user.oldPassword" class="form-group has-error">
                            <span class="help-block" ng-show="submitted && !user.oldPassword">
                                Please fill in old password
                            </span>
                        </div>
                        <br ng-show="changePass" />
                        <div ng-show="changePass && submitted && user.oldPassword && !user.newPassword && !user.confirmPassword" class="form-group has-error">
                            <span class="help-block" ng-show="submitted && user.oldPassword && !user.newPassword && !user.confirmPassword">
                                Please fill in new password and confirm the password below 
                            </span>
                        </div>
                        <input ng-show="changePass" ng-model="user.newPassword" class="form-control" type="password" placeholder="New Password" />
                        <br ng-show="changePass" />
                        <input ng-show="changePass" ng-model="user.confirmPassword" class="form-control" type="password" placeholder="Confirm Password" />
                        <div ng-show="changePass && submitted && user.oldPassword && user.newPassword !== user.confirmPassword" class="form-group has-error">
                            <span class="help-block" ng-show="submitted && user.oldPassword && user.newPassword !== user.confirmPassword">
                                Password does not match the confirm password
                            </span>
                        </div>
                        <br ng-show="changePass" />
                        <input value="Cancel Change Password"
                            class="first form-control" 
                            type="button" 
                            ng-show="changePass" 
                            ng-click="changePass = false" />
                    </div>
                </div>
            </div>
            <br>
            <div class="row-fluid">
                <div class="col-md-8 col-md-offset-1">
                    <button class="btn hub-buttons" ng-click="updateProfile()">Update</button>
                </div>
            </div>
        </div>                    
    </div>
</div>